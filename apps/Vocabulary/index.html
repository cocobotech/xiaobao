<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COCOBO-Vocabulary Learning App</title>
    <style>
        /* ccbnotes: Global reset and box-sizing */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ccbnotes: Main body styling with gradient background */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* ccbnotes: Main container for the app */
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
        }

        /* ccbnotes: App title styling */
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        /* ccbnotes: File upload section styling */
        .file-upload-section {
            padding: 30px;
            border: 3px dashed #667eea;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            background: #f8f9fa;
        }

        .file-upload-section h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        /* ccbnotes: Upload button styling */
        .upload-btn {
            display: inline-block;
            padding: 15px 30px;
            background: #667eea;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px;
        }

        .upload-btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        /* ccbnotes: Hide file input elements */
        input[type="file"] {
            display: none;
        }

        /* ccbnotes: Instructions section styling */
        .instructions {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #ffc107;
        }

        .instructions h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .instructions p {
            color: #856404;
            line-height: 1.6;
            margin-bottom: 5px;
        }

        /* ccbnotes: Demo mode notice styling */
        .demo-notice {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #17a2b8;
            text-align: center;
            color: #0c5460;
            font-weight: bold;
        }

        /* ccbnotes: Card container - hidden by default until mode selected */
        .card-container {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        /* ccbnotes: Main flashcard styling */
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            min-width: 400px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: scale(1.02);
        }

        /* ccbnotes: Word image styling - hidden by default, shown when flipped */
        .card-image {
            width: 300px;
            height: 300px;
            object-fit: contain;
            border-radius: 15px;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 10px;
            display: none;
        }

        /* ccbnotes: English word display - always visible */
        .card-word {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        /* ccbnotes: Chinese translation - hidden by default, shown when flipped */
        .card-translation {
            font-size: 1.8em;
            color: #666;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        /* ccbnotes: Example sentence - hidden by default, shown when flipped */
        .card-sentence {
            font-size: 1.2em;
            color: #888;
            font-style: italic;
            text-align: center;
            line-height: 1.6;
            max-width: 500px;
            display: none;
        }

        /* ccbnotes: Control buttons container */
        .controls {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        /* ccbnotes: Base styling for all control buttons */
        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        /* ccbnotes: Previous button styling */
        .prev-btn {
            background: #6c757d;
            color: white;
        }

        .prev-btn:hover {
            background: #5a6268;
        }

        /* ccbnotes: Next button styling */
        .next-btn {
            background: #28a745;
            color: white;
        }

        .next-btn:hover {
            background: #218838;
        }

        /* ccbnotes: Speak button styling */
        .speak-btn {
            background: #17a2b8;
            color: white;
        }

        .speak-btn:hover {
            background: #138496;
        }

        /* ccbnotes: Home button styling */
        .home-btn {
            background: #dc3545;
            color: white;
        }

        .home-btn:hover {
            background: #c82333;
        }

        /* ccbnotes: Progress counter styling */
        .progress {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
        }

        /* ccbnotes: Flip hint text at bottom of card */
        .flip-hint {
            position: absolute;
            bottom: 20px;
            font-size: 0.9em;
            color: #999;
        }

        /* ccbnotes: When card is flipped, show image, translation, and sentence */
        .card.flipped .card-image,
        .card.flipped .card-translation,
        .card.flipped .card-sentence {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Vocabulary Learning App</h1>

        <!-- ccbnotes: Demo mode indicator -->
        <div class="demo-notice">
            üéØ Demo Mode: Using built-in sample words with images
        </div>

        <!-- ccbnotes: Instructions for users -->
        <div class="instructions">
            <p>‚Ä¢ Use üîä button to for pronunciation (Text-to-Speech)</p>
        </div>

        <!-- ccbnotes: File upload section for custom vocabulary -->
        <div class="file-upload-section">
            <h3>Choose Learning Mode</h3>
            <label class="upload-btn" onclick="startDemo()">
                üéØ Start Demo
            </label>
            <label class="upload-btn" for="csvInput">
                üìÑ Upload CSV File
            </label>
            <label class="upload-btn" for="folderInput">
                üìÅ Upload Images Folder
            </label>
            <input type="file" id="csvInput" accept=".csv">
            <input type="file" id="folderInput" multiple accept="image/*">
        </div>

        <!-- ccbnotes: Main flashcard display area -->
        <div class="card-container" id="cardContainer">
            <div class="card" id="card" onclick="flipCard()">
                <img class="card-image" id="cardImage" src="" alt="Word Image">
                <div class="card-word" id="cardWord">Word</div>
                <div class="card-translation" id="cardTranslation">Translation</div>
                <div class="card-sentence" id="cardSentence">Example sentence</div>
                <div class="flip-hint">üí° Click card to flip</div>
            </div>

            <!-- ccbnotes: Navigation and control buttons -->
            <div class="controls">
                <button class="control-btn prev-btn" onclick="previousCard()">‚¨ÖÔ∏è Previous</button>
                <button class="control-btn speak-btn" onclick="speakWord()">üîä Speak</button>
                <button class="control-btn next-btn" onclick="nextCard()">Next ‚û°Ô∏è</button>
                <button class="control-btn home-btn" onclick="goHome()">üè† Home</button>
            </div>

            <!-- ccbnotes: Progress indicator showing current position -->
            <div class="progress" id="progress">1 / 5</div>
        </div>
    </div>

    <script>
        // ccbnotes: Owner - ccbnotes
        // ccbnotes: Vocabulary Learning App - Flashcard system for learning English words
        // ccbnotes: Features: flip cards, text-to-speech, custom word lists
        
        // ccbnotes: Demo vocabulary data with embedded SVG images as base64
        // ccbnotes: Each entry contains: word, translation, sentence, and image
        const demoVocabulary = [
            {
                word: 'apple',
                translation: 'ËãπÊûú',
                sentence: 'I eat an apple every day.',
                image: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                        <circle cx="100" cy="110" r="60" fill="#ff4444"/>
                        <ellipse cx="100" cy="110" rx="60" ry="55" fill="#ff6666"/>
                        <path d="M100 50 Q90 30 85 20" stroke="#8B4513" stroke-width="4" fill="none"/>
                        <ellipse cx="110" cy="60" rx="15" ry="8" fill="#228B22" transform="rotate(-20 110 60)"/>
                    </svg>
                `)
            },
            {
                word: 'book',
                translation: '‰π¶',
                sentence: 'She is reading a book in the library.',
                image: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                        <rect x="50" y="40" width="100" height="120" fill="#4169E1" rx="5"/>
                        <rect x="55" y="45" width="90" height="110" fill="#6495ED" rx="3"/>
                        <line x1="100" y1="45" x2="100" y2="155" stroke="#4169E1" stroke-width="2"/>
                        <rect x="50" y="155" width="100" height="10" fill="#2E5090"/>
                    </svg>
                `)
            },
            {
                word: 'cat',
                translation: 'Áå´',
                sentence: 'The cat is sleeping on the sofa.',
                image: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                        <ellipse cx="100" cy="120" rx="50" ry="40" fill="#FFA500"/>
                        <circle cx="100" cy="90" r="35" fill="#FFA500"/>
                        <polygon points="70,60 60,30 80,70" fill="#FFA500"/>
                        <polygon points="130,60 140,30 120,70" fill="#FFA500"/>
                        <circle cx="85" cy="85" r="5" fill="#000"/>
                        <circle cx="115" cy="85" r="5" fill="#000"/>
                        <path d="M100 95 L95 100 L100 100 L105 100 L100 95" stroke="#000" stroke-width="2" fill="none"/>
                    </svg>
                `)
            },
            {
                word: 'house',
                translation: 'ÊàøÂ≠ê',
                sentence: 'They live in a beautiful house.',
                image: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                        <polygon points="100,40 40,100 160,100" fill="#DC143C"/>
                        <rect x="50" y="100" width="100" height="80" fill="#8B4513"/>
                        <rect x="70" y="120" width="25" height="30" fill="#87CEEB"/>
                        <rect x="105" y="120" width="25" height="30" fill="#87CEEB"/>
                        <rect x="85" y="150" width="30" height="30" fill="#654321"/>
                    </svg>
                `)
            },
            {
                word: 'sun',
                translation: 'Â§™Èò≥',
                sentence: 'The sun is shining brightly today.',
                image: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                        <circle cx="100" cy="100" r="40" fill="#FFD700"/>
                        <circle cx="100" cy="100" r="35" fill="#FFA500"/>
                        <line x1="100" y1="30" x2="100" y2="50" stroke="#FFD700" stroke-width="4"/>
                        <line x1="100" y1="150" x2="100" y2="170" stroke="#FFD700" stroke-width="4"/>
                        <line x1="30" y1="100" x2="50" y2="100" stroke="#FFD700" stroke-width="4"/>
                        <line x1="150" y1="100" x2="170" y2="100" stroke="#FFD700" stroke-width="4"/>
                        <line x1="50" y1="50" x2="65" y2="65" stroke="#FFD700" stroke-width="4"/>
                        <line x1="135" y1="135" x2="150" y2="150" stroke="#FFD700" stroke-width="4"/>
                        <line x1="150" y1="50" x2="135" y2="65" stroke="#FFD700" stroke-width="4"/>
                        <line x1="65" y1="135" x2="50" y2="150" stroke="#FFD700" stroke-width="4"/>
                    </svg>
                `)
            }
        ];

        // ccbnotes: Global variables to track app state
        let vocabulary = [];           // ccbnotes: Current vocabulary list being studied
        let images = {};               // ccbnotes: Stores uploaded images by word name
        let currentIndex = 0;          // ccbnotes: Current card position in vocabulary array
        let isFlipped = false;         // ccbnotes: Track whether current card is flipped

        // ccbnotes: Text-to-Speech function - speaks only the English word
        function speakWord() {
            const word = vocabulary[currentIndex].word;
            
            // ccbnotes: Check if browser supports speech synthesis
            if ('speechSynthesis' in window) {
                // ccbnotes: Stop any ongoing speech
                window.speechSynthesis.cancel();
                
                // ccbnotes: Create utterance for the word only
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';          // ccbnotes: Set to English
                utterance.rate = 0.8;              // ccbnotes: Slightly slower for learning
                utterance.pitch = 1;               // ccbnotes: Normal pitch
                
                // ccbnotes: Speak the word
                window.speechSynthesis.speak(utterance);
            } else {
                alert('Sorry, your browser does not support text-to-speech.');
            }
        }

        // ccbnotes: Function to start demo mode with built-in vocabulary
        function startDemo() {
            vocabulary = demoVocabulary;
            currentIndex = 0;
            loadCard();
            // ccbnotes: Hide upload section and show card container
            document.querySelector('.file-upload-section').style.display = 'none';
            document.getElementById('cardContainer').style.display = 'flex';
        }

        // ccbnotes: Function to load and display current card
        // ccbnotes: Default shows only English word, flip to see image/translation/sentence
        function loadCard() {
            const card = vocabulary[currentIndex];
            document.getElementById('cardImage').src = card.image;
            document.getElementById('cardWord').textContent = card.word;
            document.getElementById('cardTranslation').textContent = card.translation;
            document.getElementById('cardSentence').textContent = card.sentence;
            document.getElementById('progress').textContent = `${currentIndex + 1} / ${vocabulary.length}`;
            
            // ccbnotes: Reset flip state - always show word side first
            document.getElementById('card').classList.remove('flipped');
            isFlipped = false;
        }

        // ccbnotes: Function to flip card - toggle between word and details
        function flipCard() {
            const card = document.getElementById('card');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        // ccbnotes: Function to move to next card
        function nextCard() {
            if (currentIndex < vocabulary.length - 1) {
                currentIndex++;
                loadCard();
            } else {
                alert('üéâ Congratulations! You have completed all words!');
            }
        }

        // ccbnotes: Function to move to previous card
        function previousCard() {
            if (currentIndex > 0) {
                currentIndex--;
                loadCard();
            }
        }

        // ccbnotes: Function to return to home screen (mode selection)
        function goHome() {
            // ccbnotes: Hide card container and show file upload section
            document.getElementById('cardContainer').style.display = 'none';
            document.querySelector('.file-upload-section').style.display = 'block';
            
            // ccbnotes: Reset vocabulary and state
            vocabulary = [];
            images = {};
            currentIndex = 0;
            isFlipped = false;
        }

        // ccbnotes: Handle CSV file upload for custom vocabulary
        document.getElementById('csvInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (file) {
                const text = await file.text();
                parseCSV(text);
            }
        });

        // ccbnotes: Handle image folder upload for custom vocabulary
        document.getElementById('folderInput').addEventListener('change', async (e) => {
            const files = e.target.files;
            for (let file of files) {
                // ccbnotes: Extract filename without extension and convert to lowercase
                const fileName = file.name.split('.')[0].toLowerCase();
                const reader = new FileReader();
                reader.onload = (event) => {
                    // ccbnotes: Store image as data URL with filename as key
                    images[fileName] = event.target.result;
                    checkAndStart();
                };
                reader.readAsDataURL(file);
            }
        });

        // ccbnotes: Function to parse CSV file into vocabulary array
        function parseCSV(text) {
            const lines = text.split('\n');
            vocabulary = [];
            
            // ccbnotes: Skip header row (i=1), process each line
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    // ccbnotes: Split by comma and trim whitespace
                    const parts = line.split(',').map(s => s.trim());
                    if (parts.length >= 3) {
                        vocabulary.push({
                            word: parts[0],
                            translation: parts[1],
                            sentence: parts[2],
                            image: null
                        });
                    }
                }
            }
            checkAndStart();
        }

        // ccbnotes: Function to check if both CSV and images are loaded, then start
        function checkAndStart() {
            if (vocabulary.length > 0 && Object.keys(images).length > 0) {
                // ccbnotes: Match uploaded images to vocabulary words
                vocabulary.forEach(item => {
                    const wordKey = item.word.toLowerCase();
                    if (images[wordKey]) {
                        item.image = images[wordKey];
                    }
                });
                
                // ccbnotes: Initialize and display first card
                currentIndex = 0;
                loadCard();
                document.querySelector('.file-upload-section').style.display = 'none';
                document.getElementById('cardContainer').style.display = 'flex';
            }
        }

        // ccbnotes: Keyboard shortcuts for navigation
        document.addEventListener('keydown', (e) => {
            if (vocabulary.length === 0) return;
            
            if (e.key === 'ArrowRight') {
                nextCard();                          // ccbnotes: Right arrow = next card
            } else if (e.key === 'ArrowLeft') {
                previousCard();                      // ccbnotes: Left arrow = previous card
            } else if (e.key === ' ') {
                e.preventDefault();
                flipCard();                          // ccbnotes: Spacebar = flip card
            } else if (e.key === 's' || e.key === 'S') {
                speakWord();                         // ccbnotes: S key = speak word
            }
        });
    </script>
</body>
</html>
