<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>COCOBO Â· ä¹˜é™¤æ³•æµ‹è¯•</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700;900&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESET & ROOT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
:root{
  --sky:#0b1829; --sky2:#0d2240;
  --teal:#00c2cb; --teal2:#00e5f0;
  --gold:#f5c842; --gold2:#ffe082;
  --mint:#43e9b0; --coral:#ff7c6e;
  --purple:#a78bfa; --white:#e8f4fd;
  --muted:#6b8fa8;
  --card:rgba(255,255,255,0.04);
  --card-border:rgba(0,194,203,0.18);
  --radius:20px; --radius-lg:28px;
}
html{scroll-behavior:smooth;}
body{
  font-family:'Noto Sans SC',sans-serif;
  background: linear-gradient(135deg, #0b1829 0%, #0d2240 100%);
  color:var(--white);
  min-height:100vh; overflow-x:hidden;
}
::-webkit-scrollbar{width:5px;}
::-webkit-scrollbar-track{background:var(--sky);}
::-webkit-scrollbar-thumb{background:#1a3a5c;border-radius:3px;}

/* å½»åº•ç§»é™¤ WebGL èƒŒæ™¯ç”»å¸ƒ */
#bg-canvas{display:none;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TOPBAR / LOGO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar{
  position:fixed;top:0;left:0;right:0;z-index:100;
  padding:0 28px;height:52px;
  display:flex;align-items:center;
  background:rgba(7,18,36,0.78);
  backdrop-filter:blur(20px) saturate(1.6);
  border-bottom:1px solid rgba(0,194,203,0.12);
  box-shadow:0 4px 28px rgba(0,0,0,0.4);
}
.logo-wrap{display:flex;align-items:center;gap:10px;text-decoration:none;user-select:none;}
.logo-mark{width:36px;height:36px;flex-shrink:0;animation:logoGlow 4s ease-in-out infinite;}
@keyframes logoGlow{
  0%,100%{filter:drop-shadow(0 0 7px rgba(0,194,203,0.6));}
  50%{filter:drop-shadow(0 0 14px rgba(167,139,250,0.75));}
}
.logo-divider{width:1px;height:26px;background:linear-gradient(180deg,transparent,rgba(0,194,203,0.3),transparent);margin:0 2px;}
.logo-text{display:flex;flex-direction:column;line-height:1;gap:1px;}
.logo-brand{
  font-family:'Noto Sans SC',sans-serif;font-weight:700;font-size:17px;
  letter-spacing:0.1em;
  background:linear-gradient(110deg,#00e5f0 0%,#a78bfa 55%,#f5c842 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  background-size:200% 100%;animation:shimmer 4s ease-in-out infinite;
}
@keyframes shimmer{0%,100%{background-position:0% 50%;}50%{background-position:100% 50%;}}
.logo-sub{font-size:9px;font-weight:500;letter-spacing:0.25em;color:rgba(0,194,203,0.5);text-transform:uppercase;}
.topbar-right{margin-left:auto;display:flex;align-items:center;gap:8px;}
.nav-tag{
  font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;
  color:rgba(245,200,66,0.8);border:1px solid rgba(245,200,66,0.2);
  background:rgba(245,200,66,0.07);padding:4px 12px;border-radius:20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PAGE WRAP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{
  position:relative;z-index:1;
  max-width:820px;margin:0 auto;
  padding:68px 20px 60px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card{
  background:var(--card);
  border:1px solid var(--card-border);
  border-radius:var(--radius-lg);
  padding:28px 32px;
  backdrop-filter:blur(12px);
  box-shadow:0 8px 40px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.05);
}
.section-label{
  display:inline-flex;align-items:center;gap:7px;
  font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;
  color:var(--teal);border:1px solid rgba(0,194,203,0.3);
  background:rgba(0,194,203,0.08);padding:4px 12px;border-radius:20px;
  margin-bottom:14px;
}
.section-label::before{content:'';width:5px;height:5px;background:var(--teal);border-radius:50%;box-shadow:0 0 5px var(--teal);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SETUP SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-setup{animation:fadeUp .6s ease both;}
@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}

.setup-title{
  font-family:'Noto Serif SC',serif;
  font-size:clamp(26px,4.2vw,41px);font-weight:700;
  line-height:1.3;margin-bottom:6px;
  background:linear-gradient(135deg,var(--teal2),var(--mint));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.setup-sub{font-size:16px;color:var(--muted);margin-bottom:28px;letter-spacing:0.03em;}

/* Mode selector */
.mode-row{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap;}
.mode-btn{
  flex:1;min-width:120px;
  padding:16px 10px;
  background:rgba(255,255,255,0.03);
  border:1.5px solid rgba(255,255,255,0.08);
  border-radius:16px;
  color:var(--muted);
  font-family:'Noto Sans SC',sans-serif;
  font-size:16px;font-weight:700;
  cursor:pointer;
  transition:all .25s ease;
  display:flex;flex-direction:column;align-items:center;gap:6px;
}
.mode-btn .mode-icon{font-size:32px;line-height:1;}
.mode-btn .mode-label{font-size:14px;letter-spacing:.5px;}
.mode-btn:hover{background:rgba(0,194,203,0.08);border-color:rgba(0,194,203,0.3);color:var(--teal2);}
.mode-btn.active{
  background:linear-gradient(135deg,rgba(0,194,203,0.15),rgba(167,139,250,0.1));
  border-color:var(--teal);color:var(--white);
  box-shadow:0 0 20px rgba(0,194,203,0.15),inset 0 1px 0 rgba(255,255,255,0.08);
}
.mode-btn.active .mode-icon{filter:drop-shadow(0 0 8px rgba(0,194,203,0.6));}

/* Count selector */
.count-row{
  display:flex;align-items:center;gap:16px;margin-bottom:28px;flex-wrap:wrap;
}
.count-label{font-size:15px;color:var(--muted);font-weight:500;}
.count-ctrl{display:flex;align-items:center;gap:0;}
.count-btn{
  width:44px;height:44px;
  background:rgba(0,194,203,0.08);
  border:1.5px solid rgba(0,194,203,0.25);
  color:var(--teal);
  font-size:24px;font-weight:700;
  cursor:pointer;
  transition:all .2s ease;
  display:flex;align-items:center;justify-content:center;
  font-family:'Noto Sans SC',sans-serif;
}
.count-btn:first-child{border-radius:12px 0 0 12px;}
.count-btn:last-child{border-radius:0 12px 12px 0;}
.count-btn:hover{background:rgba(0,194,203,0.2);border-color:var(--teal);}
.count-btn:disabled{opacity:.3;cursor:not-allowed;}
.count-num{
  width:64px;height:44px;
  background:rgba(0,194,203,0.06);
  border:1.5px solid rgba(0,194,203,0.2);
  border-left:none;border-right:none;
  font-family:'Noto Serif SC',serif;
  font-size:28px;font-weight:700;
  color:var(--mint);
  display:flex;align-items:center;justify-content:center;
  text-shadow:0 0 16px rgba(67,233,176,0.4);
}

/* Start button */
.btn-start{
  width:100%;padding:18px;
  background:linear-gradient(135deg,#00c2cb,#00a8e0,#0077cc);
  border:none;border-radius:14px;
  color:#fff;font-family:'Noto Sans SC',sans-serif;
  font-size:18px;font-weight:700;letter-spacing:.08em;
  cursor:pointer;position:relative;overflow:hidden;
  box-shadow:0 8px 28px rgba(0,194,203,0.35);
  transition:all .3s ease;
}
.btn-start::after{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,0.12),transparent);
  border-radius:14px;
}
.btn-start:hover{transform:translateY(-2px);box-shadow:0 12px 36px rgba(0,194,203,0.5);}
.btn-start:active{transform:translateY(0);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-quiz{display:none;animation:fadeUp .5s ease both;}

/* Progress bar */
.progress-wrap{margin-bottom:20px;}
.progress-info{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:8px;
}
.prog-label{font-size:13px;color:var(--muted);font-weight:600;letter-spacing:1px;text-transform:uppercase;}
.prog-frac{
  font-family:'Noto Serif SC',serif;font-size:14px;font-weight:700;color:var(--teal);
}
.progress-track{
  width:100%;height:6px;background:rgba(255,255,255,0.06);border-radius:3px;overflow:hidden;
}
.progress-fill{
  height:100%;border-radius:3px;
  background:linear-gradient(90deg,var(--teal),var(--mint));
  transition:width .5s cubic-bezier(.34,1.56,.64,1);
  box-shadow:0 0 8px rgba(0,194,203,0.4);
}

/* Stats row */
.stats-row{
  display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap;
}
.stat-chip{
  display:flex;align-items:center;gap:7px;
  padding:7px 16px;border-radius:20px;font-size:13px;font-weight:700;
  letter-spacing:.5px;
}
.stat-chip.correct{background:rgba(67,233,176,0.1);border:1px solid rgba(67,233,176,0.25);color:var(--mint);}
.stat-chip.wrong{background:rgba(255,124,110,0.1);border:1px solid rgba(255,124,110,0.25);color:var(--coral);}
.stat-chip.streak{background:rgba(245,200,66,0.1);border:1px solid rgba(245,200,66,0.25);color:var(--gold);}
.chip-icon{font-size:15px;}

/* Question card */
.question-card{
  text-align:center;padding:36px 28px 28px;
  background:linear-gradient(135deg,rgba(0,194,203,0.06),rgba(167,139,250,0.04));
  border:1px solid rgba(0,194,203,0.15);
  border-radius:var(--radius-lg);
  margin-bottom:20px;
  position:relative;overflow:hidden;
}
.question-card::before{
  content:'';position:absolute;top:-40px;right:-40px;
  width:140px;height:140px;border-radius:50%;
  background:radial-gradient(circle,rgba(0,194,203,0.07),transparent 70%);
  pointer-events:none;
}
.q-type-badge{
  display:inline-block;
  font-size:11px;font-weight:800;letter-spacing:2px;text-transform:uppercase;
  padding:4px 14px;border-radius:20px;margin-bottom:16px;
}
.q-type-badge.mult{background:rgba(167,139,250,0.12);color:var(--purple);border:1px solid rgba(167,139,250,0.3);}
.q-type-badge.div{background:rgba(0,194,203,0.1);color:var(--teal);border:1px solid rgba(0,194,203,0.25);}

.question-text{
  font-family:'Noto Serif SC',serif;
  font-size:clamp(52px,9.5vw,86px);
  font-weight:700;line-height:1;
  color:var(--white);
  letter-spacing:0.06em;
  text-shadow:0 2px 30px rgba(0,194,203,0.2);
  animation:qIn .4s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes qIn{from{opacity:0;transform:scale(.85) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}

.question-text .q-op{color:var(--muted);padding:0 8px;font-weight:300;}
.question-text .q-blank{
  display:inline-block;min-width:86px;
  border-bottom:4px solid var(--teal);
  color:var(--teal2);
  padding:0 6px;
}
.q-hint{
  font-size:15px;color:var(--muted);margin-top:16px;
  font-style:italic;letter-spacing:.03em;
  min-height:24px;transition:all .3s ease;
}
.q-hint.correct-hint{color:var(--mint);font-style:normal;font-weight:700;}
.q-hint.wrong-hint{color:var(--coral);font-style:normal;}

/* Answer options grid */
.options-grid{
  display:grid;grid-template-columns:repeat(4,1fr);gap:14px;
  margin-bottom:20px;
}
@media(max-width:500px){.options-grid{grid-template-columns:repeat(2,1fr);}}

.opt-btn{
  padding:20px 10px;
  background:rgba(255,255,255,0.04);
  border:1.5px solid rgba(255,255,255,0.08);
  border-radius:16px;
  color:var(--white);
  font-family:'Noto Serif SC',serif;
  font-size:clamp(24px,3.8vw,34px);font-weight:700;
  cursor:pointer;
  transition:background .2s ease,border-color .2s ease,transform .15s ease,box-shadow .2s ease;
  position:relative;overflow:hidden;
  user-select:none;
}
.opt-btn::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,0.06),transparent);
  border-radius:16px;pointer-events:none;
}
.opt-btn:hover:not(:disabled){
  background:rgba(0,194,203,0.1);
  border-color:rgba(0,194,203,0.4);
  transform:translateY(-3px) scale(1.04);
  box-shadow:0 8px 24px rgba(0,194,203,0.2);
}
.opt-btn:active:not(:disabled){transform:scale(.96);}

/* Correct state */
.opt-btn.correct{
  background:linear-gradient(135deg,rgba(67,233,176,0.22),rgba(0,194,203,0.14));
  border-color:var(--mint);color:var(--mint);
  box-shadow:0 0 28px rgba(67,233,176,0.3);
  animation:correctPop .4s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes correctPop{
  0%{transform:scale(1)}40%{transform:scale(1.14)}70%{transform:scale(.96)}100%{transform:scale(1)}
}

/* Wrong state */
.opt-btn.wrong{
  background:rgba(255,124,110,0.14);
  border-color:var(--coral);color:var(--coral);
  animation:shake .45s ease both;
}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  15%{transform:translateX(-10px)}
  30%{transform:translateX(10px)}
  45%{transform:translateX(-7px)}
  60%{transform:translateX(7px)}
  75%{transform:translateX(-4px)}
  90%{transform:translateX(4px)}
}

/* Disabled other options after correct */
.opt-btn.dimmed{opacity:.3;cursor:not-allowed;pointer-events:none;}

/* Next button */
.btn-next{
  width:100%;padding:16px;
  background:linear-gradient(135deg,rgba(67,233,176,0.18),rgba(0,194,203,0.12));
  border:1.5px solid rgba(67,233,176,0.45);
  border-radius:16px;color:var(--mint);
  font-family:'Noto Sans SC',sans-serif;
  font-size:17px;font-weight:700;letter-spacing:.08em;
  cursor:pointer;
  transition:all .25s ease;display:none;
}
.btn-next:hover{background:linear-gradient(135deg,rgba(67,233,176,0.28),rgba(0,194,203,0.2));transform:translateY(-3px);box-shadow:0 10px 28px rgba(67,233,176,0.25);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESULT SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-result{display:none;animation:fadeUp .6s ease both;}

.result-hero{
  text-align:center;padding:36px 28px;
  background:linear-gradient(135deg,rgba(0,194,203,0.07),rgba(167,139,250,0.05));
  border:1px solid rgba(0,194,203,0.15);
  border-radius:var(--radius-lg);
  margin-bottom:20px;
}
.result-emoji{font-size:72px;display:block;margin-bottom:14px;animation:bounceIn .6s cubic-bezier(.34,1.56,.64,1) both;}
@keyframes bounceIn{from{transform:scale(0) rotate(-20deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}
.result-title{
  font-family:'Noto Serif SC',serif;
  font-size:clamp(30px,5.8vw,46px);font-weight:700;
  background:linear-gradient(135deg,var(--teal2),var(--mint));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  margin-bottom:10px;
}
.result-score-big{
  font-family:'Noto Serif SC',serif;
  font-size:clamp(56px,11vw,92px);font-weight:900;
  color:var(--gold);
  text-shadow:0 0 40px rgba(245,200,66,0.4);
  line-height:1;margin:12px 0;
}
.result-sub{font-size:16px;color:var(--muted);letter-spacing:.03em;}

.result-stats{
  display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-bottom:20px;
}
.r-stat{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.07);
  border-radius:16px;padding:18px 12px;text-align:center;
}
.r-stat-num{
  font-family:'Noto Serif SC',serif;
  font-size:32px;font-weight:700;line-height:1;margin-bottom:8px;
}
.r-stat-label{font-size:12px;color:var(--muted);letter-spacing:1px;text-transform:uppercase;}
.r-stat.c .r-stat-num{color:var(--mint);}
.r-stat.w .r-stat-num{color:var(--coral);}
.r-stat.a .r-stat-num{color:var(--gold);}

/* Review list */
.review-title{
  font-size:14px;font-weight:800;letter-spacing:2px;text-transform:uppercase;
  color:var(--muted);margin-bottom:14px;
}
.review-list{
  display:flex;flex-direction:column;gap:10px;max-height:340px;overflow-y:auto;
  padding-right:6px;margin-bottom:20px;
}
.review-list::-webkit-scrollbar{width:5px;}
.review-list::-webkit-scrollbar-track{background:rgba(255,255,255,0.02);}
.review-list::-webkit-scrollbar-thumb{background:#1a3a5c;border-radius:3px;}

.review-item{
  display:flex;align-items:center;gap:14px;
  padding:12px 18px;
  background:rgba(255,255,255,0.02);
  border-radius:14px;
  border-left:4px solid;
  font-size:15px;
}
.review-item.ok{border-color:var(--mint);}
.review-item.ko{border-color:var(--coral);}
.review-icon{font-size:18px;flex-shrink:0;}
.review-eq{flex:1;font-family:'Noto Serif SC',serif;font-size:17px;font-weight:700;color:var(--white);}
.review-tries{font-size:12px;color:var(--muted);white-space:nowrap;}

/* Result buttons */
.result-btn-row{display:flex;gap:14px;flex-wrap:wrap;}
.btn-retry{
  flex:1;min-width:140px;padding:16px;
  background:linear-gradient(135deg,#00c2cb,#0077cc);
  border:none;border-radius:16px;
  color:#fff;font-family:'Noto Sans SC',sans-serif;
  font-size:16px;font-weight:700;letter-spacing:.06em;
  cursor:pointer;
  box-shadow:0 8px 28px rgba(0,194,203,0.35);
  transition:all .25s ease;
}
.btn-retry:hover{transform:translateY(-3px);box-shadow:0 12px 32px rgba(0,194,203,0.5);}
.btn-home{
  flex:1;min-width:140px;padding:16px;
  background:rgba(255,255,255,0.04);
  border:1.5px solid rgba(255,255,255,0.1);
  border-radius:16px;color:var(--muted);
  font-family:'Noto Sans SC',sans-serif;
  font-size:16px;font-weight:700;letter-spacing:.06em;
  cursor:pointer;transition:all .25s ease;
}
.btn-home:hover{background:rgba(255,255,255,0.08);color:var(--white);border-color:rgba(255,255,255,0.25);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CANVAS CONFETTI â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#confetti-canvas{position:fixed;inset:0;z-index:200;pointer-events:none;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.site-footer{
  position:relative;z-index:1;
  max-width:820px;margin:0 auto;
  padding:0 20px;
}
.footer-inner{
  border-top:1px solid rgba(0,194,203,0.1);
  padding:20px 0 28px;
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;
}
.footer-logo-wrap{display:flex;align-items:center;gap:8px;}
.footer-logo-mark{width:22px;height:22px;opacity:.65;}
.footer-brand{
  font-size:12px;font-weight:700;letter-spacing:.12em;
  background:linear-gradient(110deg,#00c2cb,#a78bfa);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.footer-center{text-align:center;flex:1;}
.footer-copy{font-size:11px;color:rgba(107,143,168,0.65);letter-spacing:.04em;}
.footer-copy strong{color:rgba(0,194,203,0.6);font-weight:600;}
.footer-dept{display:inline-block;margin-top:3px;font-size:10px;color:rgba(245,200,66,0.5);letter-spacing:.1em;font-weight:500;}
.footer-right{font-size:10px;color:rgba(107,143,168,0.4);letter-spacing:.06em;text-align:right;}
@media(max-width:500px){
  .footer-inner{flex-direction:column;align-items:center;text-align:center;}
  .footer-right{text-align:center;}
  .result-stats{grid-template-columns:repeat(3,1fr);}
}
</style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>

<!-- â”€â”€ TOPBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav class="topbar">
  <a class="logo-wrap" href="#">
    <svg class="logo-mark" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" fill="none">
      <defs>
        <linearGradient id="lg1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#00e5f0"/>
          <stop offset="50%" stop-color="#a78bfa"/>
          <stop offset="100%" stop-color="#f5c842"/>
        </linearGradient>
        <linearGradient id="lg2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#00c2cb" stop-opacity=".8"/>
          <stop offset="100%" stop-color="#a78bfa" stop-opacity=".25"/>
        </linearGradient>
      </defs>
      <circle cx="18" cy="18" r="16" stroke="url(#lg2)" stroke-width="1" stroke-dasharray="3.5 2.5" opacity=".7">
        <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="10s" repeatCount="indefinite"/>
      </circle>
      <circle cx="18" cy="18" r="11.5" fill="rgba(0,194,203,0.07)" stroke="url(#lg1)" stroke-width="1.3"/>
      <line x1="13" y1="13" x2="23" y2="23" stroke="url(#lg1)" stroke-width="2" stroke-linecap="round"/>
      <line x1="23" y1="13" x2="13" y2="23" stroke="url(#lg1)" stroke-width="2" stroke-linecap="round"/>
      <circle cx="28" cy="10" r="1.2" fill="#f5c842" opacity=".8">
        <animate attributeName="opacity" values=".8;.2;.8" dur="2.2s" repeatCount="indefinite"/>
      </circle>
      <circle cx="7" cy="26" r=".9" fill="#43e9b0" opacity=".7">
        <animate attributeName="opacity" values=".7;.1;.7" dur="3s" repeatCount="indefinite"/>
      </circle>
    </svg>
    <div class="logo-divider"></div>
    <div class="logo-text">
      <span class="logo-brand">COCOBO æ•°å­¦</span>
      <span class="logo-sub">Math Â· Quiz</span>
    </div>
  </a>
  <div class="topbar-right">
    <span class="nav-tag">ä¹˜é™¤æ³•æµ‹è¯•</span>
  </div>
</nav>

<!-- â”€â”€ PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="page">

  <!-- SETUP SCREEN -->
  <div id="screen-setup">
    <div class="card">
      <div class="section-label">å¼€å§‹æµ‹è¯•</div>
      <div class="setup-title">ä¹˜é™¤æ³•é€Ÿç®—æŒ‘æˆ˜</div>
      <div class="setup-sub">é€‰æ‹©é¢˜å‹å’Œé¢˜ç›®æ•°é‡ï¼Œå¼€å§‹ä½ çš„æ•°å­¦å†’é™©ï¼</div>

      <div class="section-label" style="margin-bottom:10px">é€‰æ‹©é¢˜å‹</div>
      <div class="mode-row">
        <button class="mode-btn" data-mode="mult" onclick="setMode('mult')">
          <span class="mode-icon">âœ–ï¸</span>
          <span class="mode-label">åªæœ‰ä¹˜æ³•</span>
        </button>
        <button class="mode-btn" data-mode="div" onclick="setMode('div')">
          <span class="mode-icon">â—</span>
          <span class="mode-label">åªæœ‰é™¤æ³•</span>
        </button>
        <button class="mode-btn active" data-mode="mix" onclick="setMode('mix')">
          <span class="mode-icon">ğŸ”€</span>
          <span class="mode-label">ä¹˜é™¤æ··åˆ</span>
        </button>
      </div>

      <div class="section-label" style="margin-bottom:10px">é€‰æ‹©é¢˜ç›®æ•°é‡</div>
      <div class="count-row">
        <span class="count-label">å…±</span>
        <div class="count-ctrl">
          <button class="count-btn" id="btn-minus" onclick="changeCount(-5)">âˆ’</button>
          <div class="count-num" id="count-display">10</div>
          <button class="count-btn" id="btn-plus" onclick="changeCount(+5)">+</button>
        </div>
        <span class="count-label">é“é¢˜</span>
      </div>

      <button class="btn-start" onclick="startQuiz()">å¼€å§‹æµ‹è¯• â†’</button>
    </div>
  </div>

  <!-- QUIZ SCREEN -->
  <div id="screen-quiz">
    <div class="card">
      <div class="progress-wrap">
        <div class="progress-info">
          <span class="prog-label">é¢˜ç›®è¿›åº¦</span>
          <span class="prog-frac"><span id="q-current">1</span> / <span id="q-total">10</span></span>
        </div>
        <div class="progress-track"><div class="progress-fill" id="progress-fill" style="width:0%"></div></div>
      </div>

      <div class="stats-row">
        <div class="stat-chip correct"><span class="chip-icon">âœ“</span> <span id="stat-c">0</span> ç­”å¯¹</div>
        <div class="stat-chip wrong"><span class="chip-icon">âœ—</span> <span id="stat-w">0</span> ç­”é”™</div>
        <div class="stat-chip streak"><span class="chip-icon">ğŸ”¥</span> è¿å¯¹ <span id="stat-s">0</span></div>
      </div>

      <div class="question-card">
        <div class="q-type-badge" id="q-type-badge">ä¹˜æ³•</div>
        <div class="question-text" id="question-text">
          <span id="q-a">6</span><span class="q-op" id="q-op">Ã—</span><span id="q-b">7</span><span class="q-op">=</span><span class="q-blank">?</span>
        </div>
        <div class="q-hint" id="q-hint">é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ</div>
      </div>

      <div class="options-grid" id="options-grid"></div>

      <button class="btn-next" id="btn-next" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â†’</button>
    </div>
  </div>

  <!-- RESULT SCREEN -->
  <div id="screen-result">
    <div class="result-hero card">
      <span class="result-emoji" id="result-emoji">ğŸ†</span>
      <div class="result-title" id="result-title">å¤ªæ£’äº†ï¼</div>
      <div class="result-score-big" id="result-score">10/10</div>
      <div class="result-sub" id="result-sub">å…¨éƒ¨ç­”å¯¹ï¼Œéå¸¸ä¼˜ç§€ï¼</div>
    </div>

    <div class="card">
      <div class="result-stats">
        <div class="r-stat c">
          <div class="r-stat-num" id="rs-correct">0</div>
          <div class="r-stat-label">ç­”å¯¹é¢˜æ•°</div>
        </div>
        <div class="r-stat w">
          <div class="r-stat-num" id="rs-wrong">0</div>
          <div class="r-stat-label">ç­”é”™æ¬¡æ•°</div>
        </div>
        <div class="r-stat a">
          <div class="r-stat-num" id="rs-acc">100%</div>
          <div class="r-stat-label">æ­£ç¡®ç‡</div>
        </div>
      </div>

      <div class="review-title">é¢˜ç›®å›é¡¾</div>
      <div class="review-list" id="review-list"></div>

      <div class="result-btn-row">
        <button class="btn-retry" onclick="retryQuiz()">ğŸ” å†æ¥ä¸€æ¬¡</button>
        <button class="btn-home" onclick="goHome()">âš™ é‡æ–°è®¾ç½®</button>
      </div>
    </div>
  </div>

</div>

<!-- FOOTER -->
<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-logo-wrap">
      <svg class="footer-logo-mark" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" fill="none">
        <defs><linearGradient id="flg2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#00c2cb"/>
          <stop offset="100%" stop-color="#a78bfa"/>
        </linearGradient></defs>
        <circle cx="11" cy="11" r="10" stroke="url(#flg2)" stroke-width="1" opacity=".6"/>
        <line x1="7" y1="7" x2="15" y2="15" stroke="url(#flg2)" stroke-width="1.6" stroke-linecap="round"/>
        <line x1="15" y1="7" x2="7" y2="15" stroke="url(#flg2)" stroke-width="1.6" stroke-linecap="round"/>
      </svg>
      <span class="footer-brand">COCOBO</span>
    </div>
    <div class="footer-center">
      <div class="footer-copy">Â© 2026 &nbsp;<strong>cocobo.tech</strong></div>
      <div class="footer-dept">æ•° å­¦ éƒ¨</div>
    </div>
    <div class="footer-right">è®©æ¯ä¸ªå­©å­<br>çˆ±ä¸Šæ•°å­¦</div>
  </div>
</footer>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// QUIZ STATE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let cfg = { mode:'mix', count:10 };

let quiz = {
  questions: [],
  current: 0,
  correctCount: 0,
  wrongCount: 0,
  streak: 0,
  bestStreak: 0,
  totalWrongPresses: 0
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SETUP FUNCTIONS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setMode(m){
  cfg.mode = m;
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.toggle('active', b.dataset.mode===m));
}

function changeCount(d){
  const next = cfg.count + d;
  if(next < 5) return;
  cfg.count = next;
  document.getElementById('count-display').textContent = cfg.count;
  document.getElementById('btn-minus').disabled = cfg.count <= 5;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// QUESTION GENERATION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function randInt(mn,mx){ return Math.floor(Math.random()*(mx-mn+1))+mn; }

function genQuestion(type){
  if(type === 'mult'){
    const a=randInt(1,9), b=randInt(1,9);
    return {type:'mult', a, b, ans:a*b};
  } else {
    const divisor=randInt(1,9), quotient=randInt(1,9);
    const total=divisor*quotient;
    return {type:'div', a:total, b:divisor, ans:quotient};
  }
}

function generateAllQuestions(){
  const qs=[];
  for(let i=0;i<cfg.count;i++){
    let type = cfg.mode==='mult' ? 'mult' : cfg.mode==='div' ? 'div' : Math.random()<.5?'mult':'div';
    const q=genQuestion(type);
    q.tries=0; q.correct=false;
    qs.push(q);
  }
  return qs;
}

function generateOptions(ans, type){
  const opts=new Set([ans]);
  const maxAns = type==='mult' ? 81 : 9;
  const minAns = 1;

  let attempts=0;
  while(opts.size < 4 && attempts<200){
    attempts++;
    let wrong;
    const r=Math.random();
    if(r<0.4) wrong = ans + randInt(-4,4);
    else if(r<0.7) wrong = randInt(Math.max(minAns,ans-8), Math.min(maxAns,ans+8));
    else wrong = randInt(minAns, maxAns);
    if(wrong>0 && wrong!==ans && wrong>=minAns && wrong<=maxAns) opts.add(wrong);
  }

  const arr=[...opts];
  arr.sort(()=>Math.random()-0.5);
  return arr;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// START QUIZ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startQuiz(){
  quiz.questions = generateAllQuestions();
  quiz.current = 0;
  quiz.correctCount = 0;
  quiz.wrongCount = 0;
  quiz.streak = 0;
  quiz.bestStreak = 0;
  quiz.totalWrongPresses = 0;

  show('screen-quiz');
  document.getElementById('q-total').textContent = cfg.count;
  renderQuestion();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// RENDER QUESTION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderQuestion(){
  const q = quiz.questions[quiz.current];
  const qIdx = quiz.current;

  document.getElementById('progress-fill').style.width = ((qIdx / cfg.count) * 100) + '%';
  document.getElementById('q-current').textContent = qIdx + 1;

  document.getElementById('stat-c').textContent = quiz.correctCount;
  document.getElementById('stat-w').textContent = quiz.totalWrongPresses;
  document.getElementById('stat-s').textContent = quiz.streak;

  const badge = document.getElementById('q-type-badge');
  if(q.type==='mult'){
    badge.textContent='ä¹˜æ³•'; badge.className='q-type-badge mult';
  } else {
    badge.textContent='é™¤æ³•'; badge.className='q-type-badge div';
  }

  document.getElementById('q-a').textContent = q.a;
  document.getElementById('q-op').textContent = q.type==='mult' ? 'Ã—' : 'Ã·';
  document.getElementById('q-b').textContent = q.b;

  const hint = document.getElementById('q-hint');
  hint.textContent = 'é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ';
  hint.className = 'q-hint';

  const qText = document.getElementById('question-text');
  qText.style.animation='none';
  void qText.offsetWidth;
  qText.style.animation='qIn .4s cubic-bezier(.34,1.56,.64,1) both';

  const opts = generateOptions(q.ans, q.type);
  const grid = document.getElementById('options-grid');
  grid.innerHTML = '';
  opts.forEach(val => {
    const btn = document.createElement('button');
    btn.className = 'opt-btn';
    btn.textContent = val;
    btn.onclick = () => checkAnswer(val, btn, q.ans, grid);
    grid.appendChild(btn);
  });

  document.getElementById('btn-next').style.display = 'none';
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CHECK ANSWER + å¥³å£° + è‡ªåŠ¨ä¸‹ä¸€é¢˜
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function checkAnswer(chosen, btn, correct, grid){
  const q = quiz.questions[quiz.current];
  const hint = document.getElementById('q-hint');

  if(chosen === correct){
    q.correct = true;
    q.tries++;
    quiz.correctCount++;
    quiz.streak++;
    if(quiz.streak > quiz.bestStreak) quiz.bestStreak = quiz.streak;

    btn.classList.add('correct');
    hint.textContent = randomPraise();
    hint.className = 'q-hint correct-hint';

    grid.querySelectorAll('.opt-btn').forEach(b => {
      if(b !== btn) b.classList.add('dimmed');
      b.disabled = true;
    });

    document.getElementById('stat-c').textContent = quiz.correctCount;
    document.getElementById('stat-s').textContent = quiz.streak;

    speakCorrect();

    setTimeout(() => {
      quiz.current++;
      if(quiz.current >= cfg.count){
        showResult();
      } else {
        renderQuestion();
      }
    }, 1400);
  } else {
    q.tries++;
    quiz.totalWrongPresses++;
    quiz.streak = 0;

    btn.classList.add('wrong');
    btn.disabled = true;
    hint.textContent = `âœ— ä¸å¯¹ï¼Œå†æƒ³æƒ³ï¼`;
    hint.className = 'q-hint wrong-hint';

    btn.addEventListener('animationend', () => btn.classList.remove('wrong'), {once:true});

    document.getElementById('stat-w').textContent = quiz.totalWrongPresses;
    document.getElementById('stat-s').textContent = quiz.streak;
  }
}

const PRAISES = ['ğŸ‰ ç­”å¯¹äº†ï¼å¤ªæ£’äº†ï¼','âœ¨ æ­£ç¡®ï¼çœŸèªæ˜ï¼','â­ å®Œç¾ï¼ç»§ç»­åŠ æ²¹ï¼','ğŸŒŸ å¤ªå‰å®³äº†ï¼','ğŸŠ ç­”å¯¹äº†ï¼Œä½ çœŸæ£’ï¼','ğŸ’« å®Œå…¨æ­£ç¡®ï¼'];
function randomPraise(){ return PRAISES[Math.floor(Math.random()*PRAISES.length)]; }

function speakCorrect(){
  if('speechSynthesis' in window){
    const utterance = new SpeechSynthesisUtterance('ç­”å¯¹å•¦');
    utterance.lang = 'zh-CN';
    utterance.volume = 0.9;
    utterance.rate = 1.05;
    utterance.pitch = 1.2;
    speechSynthesis.speak(utterance);
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// NEXT / RESULT / RETRY / HOME
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function nextQuestion(){
  quiz.current++;
  if(quiz.current >= cfg.count){
    showResult();
  } else {
    renderQuestion();
  }
}

function showResult(){
  show('screen-result');

  const total = cfg.count;
  const correct = quiz.correctCount;
  const wrong = quiz.totalWrongPresses;
  const acc = Math.round(correct / total * 100);

  document.getElementById('result-score').textContent = `${correct} / ${total}`;

  let emoji='ğŸ†', title='å¤ªæ£’äº†ï¼', sub='';
  if(correct === total && wrong === 0) {
    emoji='ğŸ†'; title='æ»¡åˆ†ï¼å®Œç¾æ— ç¼ºï¼'; sub='å…¨éƒ¨ç­”å¯¹ï¼Œä¸€æ¬¡ä¹Ÿæ²¡é”™ï¼Œä½ çœŸæ˜¯æ•°å­¦å¤©æ‰ï¼';
  } else if(acc >= 90) {
    emoji='ğŸŒŸ'; title='éå¸¸ä¼˜ç§€ï¼'; sub=`åªé”™äº†å‡ é¢˜ï¼Œç»§ç»­ä¿æŒï¼æ­£ç¡®ç‡ ${acc}%`;
  } else if(acc >= 70) {
    emoji='ğŸ˜Š'; title='åšå¾—ä¸é”™ï¼'; sub=`ç­”å¯¹äº† ${correct} é¢˜ï¼Œç»§ç»­ç»ƒä¹ ä¼šæ›´å¥½ï¼`;
  } else if(acc >= 50) {
    emoji='ğŸ’ª'; title='ç»§ç»­åŠªåŠ›ï¼'; sub=`ç­”å¯¹äº† ${correct} é¢˜ï¼Œå¤šç»ƒä¹ å°±ä¼šè¿›æ­¥ï¼`;
  } else {
    emoji='ğŸ“š'; title='éœ€è¦å¤šç»ƒä¹ ï¼'; sub=`åˆ«ç°å¿ƒï¼Œç»§ç»­ç»ƒä¹ ï¼ç­”å¯¹äº† ${correct} é¢˜`;
  }

  document.getElementById('result-emoji').textContent = emoji;
  document.getElementById('result-title').textContent = title;
  document.getElementById('result-sub').textContent = sub;

  document.getElementById('rs-correct').textContent = correct;
  document.getElementById('rs-wrong').textContent = wrong;
  document.getElementById('rs-acc').textContent = acc + '%';

  document.getElementById('progress-fill').style.width = '100%';

  const list = document.getElementById('review-list');
  list.innerHTML = '';
  quiz.questions.forEach(q => {
    const op = q.type === 'mult' ? 'Ã—' : 'Ã·';
    const item = document.createElement('div');
    item.className = 'review-item ' + (q.correct ? 'ok' : 'ko');
    item.innerHTML = `
      <span class="review-icon">${q.correct ? 'âœ“' : 'âœ—'}</span>
      <span class="review-eq">${q.a} ${op} ${q.b} = ${q.ans}</span>
      <span class="review-tries">${q.tries}æ¬¡</span>`;
    list.appendChild(item);
  });

  if(acc >= 70) launchConfetti(correct === total && wrong === 0);
}

function retryQuiz(){ startQuiz(); }
function goHome(){ show('screen-setup'); }

function show(id){
  ['screen-setup','screen-quiz','screen-result'].forEach(s => {
    const el = document.getElementById(s);
    el.style.display = s === id ? 'block' : 'none';
    if(s === id){
      el.style.animation = 'none';
      void el.offsetWidth;
      el.style.animation = 'fadeUp .5s ease both';
    }
  });
  window.scrollTo({top:0, behavior:'smooth'});
}

function launchConfetti(perfect){
  const cv = document.getElementById('confetti-canvas');
  const ctx = cv.getContext('2d');
  cv.width = innerWidth; cv.height = innerHeight;

  const count = perfect ? 120 : 60;
  const particles = [];
  const EMOJIS = ['ğŸ‰','â­','ğŸŒŸ','âœ¨','ğŸŠ','ğŸ’«','ğŸ†','ğŸˆ'];
  const COLORS = ['#00e5f0','#a78bfa','#f5c842','#43e9b0','#ff7c6e','#60a5fa'];

  for(let i=0; i<count; i++){
    const isEmoji = Math.random() < .4;
    particles.push({
      x: Math.random()*cv.width,
      y: -20-Math.random()*100,
      vx: (Math.random()-.5)*5,
      vy: 2+Math.random()*4,
      gravity: .12,
      alpha: 1,
      size: isEmoji ? 18+Math.random()*16 : 6+Math.random()*8,
      color: COLORS[Math.floor(Math.random()*COLORS.length)],
      emoji: EMOJIS[Math.floor(Math.random()*EMOJIS.length)],
      isEmoji,
      rot: Math.random()*360,
      rotV: (Math.random()-.5)*8,
      delay: Math.random()*.6
    });
  }

  const start = performance.now();
  function frame(now){
    ctx.clearRect(0,0,cv.width,cv.height);
    let any = false;
    for(const p of particles){
      const age = (now-start)/1000;
      if(age < p.delay){ any=true; continue; }
      p.x += p.vx; p.y += p.vy; p.vy += p.gravity;
      p.rot += p.rotV; p.alpha -= .008;
      if(p.alpha <= 0 || p.y > cv.height+30) continue;
      any = true;
      ctx.save();
      ctx.globalAlpha = Math.max(0, p.alpha);
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot * Math.PI/180);
      if(p.isEmoji){
        ctx.font = `${p.size}px serif`;
        ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
        ctx.fillText(p.emoji, 0, 0);
      } else {
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/4, p.size, p.size/2);
      }
      ctx.restore();
    }
    if(any) requestAnimationFrame(frame);
    else ctx.clearRect(0,0,cv.width,cv.height);
  }
  requestAnimationFrame(frame);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// KEYBOARD SUPPORT
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('keydown', e => {
  const screen = document.getElementById('screen-quiz');
  if(screen.style.display === 'none') return;
  const n = parseInt(e.key);
  if(n >= 1 && n <= 4){
    const btns = document.querySelectorAll('#options-grid .opt-btn:not(:disabled):not(.dimmed):not(.correct)');
    if(btns[n-1]) btns[n-1].click();
  }
  if(e.key === 'Enter' || e.key === ' '){
    const nb = document.getElementById('btn-next');
    if(nb.style.display !== 'none') nb.click();
  }
});

// INIT
document.getElementById('btn-minus').disabled = cfg.count <= 5;
</script>
</body>
</html>
